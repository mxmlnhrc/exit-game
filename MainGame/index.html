<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Dynamic Overlays</title>
    <link rel="stylesheet" href="resources/css/style.css">
</head>
<body>

<div id="image-container">
    <img src="resources/img/image.png" usemap="#image-map" alt="Cockpit des UBootes" id="cockpit">
    <map name="image-map">
        <area href="javascript:void(0)" onclick="loadOverlay('coordinates-entry')" alt="Koordinaten" title="Koordinaten" coords="909,756,753,578" shape="rect">
    </map>
</div>

<!-- Overlay Container -->
<div id="overlay-container" onClick="closeOverlay()">
    <div class="overlay" id="current-overlay" onClick="event.stopPropagation()"></div>
</div>


<script src="resources/js/imageMapResizer.min.js"></script>
<script>
    function loadOverlay(key) {
        fetch(`resources/overlays/overlay-${key}.html`)
            .then(r => r.text())
            .then(html => {
                const overlayContainer = document.getElementById('overlay-container');
                const imageContainer = document.getElementById('image-container');
                overlayContainer.classList.add('active');
                imageContainer.classList.add('inactive-map');
                // Nur den Inhalt der .overlay-Div aktualisieren
                const overlayContent = overlayContainer.querySelector('.overlay');
                overlayContent.innerHTML = html;
            })
            .catch(err => console.error('Overlay-Ladefehler:', err));
    }
    function closeOverlay() {
        const overlayContainer = document.getElementById('overlay-container');
        const imageContainer = document.getElementById('image-container');
        overlayContainer.classList.remove('active');
        imageContainer.classList.remove('inactive-map');
    }
    window.onload = function () {
        imageMapResizer();
    }
</script>
</body>
</html>
